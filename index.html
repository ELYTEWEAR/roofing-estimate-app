<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roofing Estimate App</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Owens Construction Roofing Estimate</h1>
            <p>Please fill out the details below to generate a roofing estimate.</p>
        </header>

        <form id="estimateForm">
            <!-- Customer Name -->
            <div class="form-row">
                <label for="customerName">Customer Name:</label>
                <input type="text" id="customerName" name="customerName">
            </div>

            <!-- Customer Address -->
            <div class="form-row">
                <label for="customerAddress">Customer Address:</label>
                <input type="text" id="customerAddress" name="customerAddress">
            </div>

            <section class="outside-work">
                <h3>Outside Work</h3>
                <div class="form-row">
                    <label for="roofPitch">I will supply Labor and Material on a </label>
                    <select id="roofPitch" name="roofPitch">
                        <option value="flat">Flat</option>
                        <option value="4/12">4/12</option>
                        <option value="5/12">5/12</option>
                        <option value="6/12">6/12</option>
                        <option value="7/12">7/12</option>
                        <option value="8/12">8/12</option>
                        <option value="9/12">9/12</option>
                        <option value="10/12">10/12</option>
                        <option value="11/12">11/12</option>
                        <option value="12/12">12/12</option>
                    </select> pitch roof.
                </div>

                <div class="form-row">
                    <label for="shinglesType">We will use </label>
                    <select id="shinglesType" name="shinglesType">
                        <option value="pinicleAtlas">Pinicle Atlas</option>
                        <option value="other">Other</option>
                    </select> shingles.
                </div>

                <div class="form-row">
                    <label for="shingleColor">Shingle Color: </label>
                    <select id="shingleColor" name="shingleColor">
                        <option value="black">Black</option>
                        <option value="grey">Grey</option>
                        <option value="brown">Brown</option>
                        <option value="tan">Tan</option>
                        <option value="red">Red</option>
                    </select>
                </div>

               <div class="form-row">
                    <label for="squares">Number of Squares: </label>
                    <input type="number" id="squares" name="squares">
                
                    <div class="pricing-options">
                        <input type="radio" id="costPerSquare350" name="costPerSquare" value="350">
                        <label for="costPerSquare350">$350 per square</label>
                
                        <input type="radio" id="costPerSquare500" name="costPerSquare" value="500" checked>
                        <label for="costPerSquare500">$500 per square</label>
                    </div>
                </div>


                <div class="form-row">
                    <input type="checkbox" id="tearOff" name="tearOff" checked>
                    <label for="tearOff">I will tear off damaged roof and re-shingle.</label>
                </div>

                <div class="form-row">
                    <label for="dripEdgeLength">New Drip Edge (Ln. Ft.): </label>
                    <input type="number" id="dripEdgeLength" name="dripEdgeLength">
                </div>

                <div class="form-row">
                    <label for="feltWeight">Felt Weight: </label>
                    <select id="feltWeight" name="feltWeight">
                        <option value="15">15 lb</option>
                        <option value="30">30 lb</option>
                    </select> on entire area of house.
                </div>

                <div class="form-row">
                    <input type="checkbox" id="iceWaterGuard" name="iceWaterGuard" checked>
                    <label for="iceWaterGuard">Add new ice and water guard on front starters from drip edge up.</label>
                </div>

                <div class="form-row">
                    <label for="chimneys">Re-flash </label>
                    <select id="chimneys" name="chimneys">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select> chimneys.
                </div>

                <div class="form-row">
                    <input type="checkbox" id="weatherIn" name="weatherIn" checked>
                    <label for="weatherIn">Weather in the roof before shingles are applied.</label>
                </div>

                <div class="form-row">
                    <label for="plywoodSheets">Replace up to </label>
                    <select id="plywoodSheets" name="plywoodSheets">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="other">Other</option>
                    </select> sheets of plywood related to your damage.
                    <input type="number" id="plywoodSheetsOther" name="plywoodSheetsOther" style="display: none;">
                </div>

                <div class="form-row">
                    <label for="insulationRating">Tear out any water damaged insulation and replace with R-</label>
                    <select id="insulationRating" name="insulationRating">
                        <option value="11">11</option>
                        <option value="13">13</option>
                        <option value="15">15</option>
                        <option value="19">19</option>
                        <option value="21">21</option>
                        <option value="30">30</option>
                        <option value="38">38</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="bootsQuantity">Install new 6" inch boots for heating and stink pipes: </label>
                    <select id="bootsQuantity" name="bootsQuantity">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="ridgeVentLength">Add new ridge vent on selective gables and apply ridge cap (Ln. Ft.): </label>
                    <input type="number" id="ridgeVentLength" name="ridgeVentLength">
                </div>

                <div class="form-row">
                    <label for="boxVentsRemove">Remove all box vents: </label>
                    <input type="number" id="boxVentsRemove" name="boxVentsRemove">
                </div>

                <div class="form-row">
                    <label for="valleysRolls">Add ice and water heavy duty to all valleys (Rolls): </label>
                    <select id="valleysRolls" name="valleysRolls">
                        <option value="0">0</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="nails1_25Boxes">Nails 1 1/4" (Boxes): </label>
                    <select id="nails1_25Boxes" name="nails1_25Boxes">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="nails1_75Boxes">Nails 1 3/4" (Boxes): </label>
                    <select id="nails1_75Boxes" name="nails1_75Boxes">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="staplesBoxes">Staples T-50's (Boxes): </label>
                    <select id="staplesBoxes" name="staplesBoxes">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <div class="form-row">
                    <label for="plywoodSheetsOSB">Plywood 7/16 OSB Sheets: </label>
                    <select id="plywoodSheetsOSB" name="plywoodSheetsOSB">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <div class="form-row">
                    <label>Using 1 - 15 yd dumpster to haul away debris.</label>
                </div>
            </section>

            <section class="costs-and-labor">
                <h3>Total for Cost and Labor</h3>
                <div class="form-row">
                    <label for="totalCost">Total for Cost and Labor: $</label>
                    <input type="number" id="totalCost" name="totalCost" readonly value="0">
                </div>

                <div class="form-row">
                    <label for="misc">Miscellaneous:</label>
                    <textarea id="misc" name="misc" rows="4"></textarea>
                </div>
            </section>

            <section class="terms-and-conditions">
                <h3>Terms and Conditions</h3>
                <p>All material is guaranteed to be as specified, and the above work to be performed in accordance with the drawings and specifications submitted for above work and completed in a substantial workmanlike manner for the sum of <input type="number" name="agreedSum">. Any alteration or deviation from above specifications involving extra costs will be executed only upon written orders, and will become an extra charge over and above the estimate. Owens Construction is not responsible for ice damage occurred on the roof. All agreements contingent upon strikes, accidents, or delays beyond our control. 50% money up front and 50% money on completion.</p>
                <p>Acceptance of Proposal: Owens Construction and <input type="text" name="clientName"> agree to the work with the money given from the insurance company, at no cost above or below the written amount including the depreciation. Any unforeseen expenses will be taken up with the insurance company and adjuster as a supplement.</p>
                <p>IN ACCORDANCE AND PURSUANT TO THE TERMS AND CONDITIONS OF OHIO REVISED CODE SECTION 1345.23 "HOME SOLICITATION ACT" THE HOMEOWNER SHALL HAVE THREE (3) BUSINESS DAYS TO CANCEL THE FOREGOING PROPOSAL/CONTRACT BY MIDNIGHT OF THE THIRD DAY.</p>
            </section>

            <section class="signatures">
                <h3>Signatures</h3>
                <div class="form-row">
                    <label for="signature1">Signature:</label>
                    <input type="text" id="signature1" name="signature1" class="signature">
                    <label for="date1">Date:</label>
                    <input type="date" id="date1" name="date1">
                </div>

                <div class="form-row">
                    <label for="signature2">Signature:</label>
                    <input type="text" id="signature2" name="signature2" class="signature">
                    <label for="date2">Date:</label>
                    <input type="date" id="date2" name="date2">
                </div>
            </section>

            <div class="form-row">
                <button type="submit">Generate Estimate</button>
            </div>
        </form>

        <!-- Image Preview Container -->
        <div id="imagePreviewContainer" style="margin-top: 20px;"></div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('estimateForm');

    form.addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(form);
        const printablePage = generatePrintablePage(formData);
        printPage(printablePage);
    });

    function generatePrintablePage(formData) {
        let printableContent = '<style>';
        printableContent += 'body { font-family: Arial, sans-serif; color: #333; }';
        printableContent += 'h1, h2 { color: #007bff; }';
        printableContent += 'label { font-weight: bold; }';
        printableContent += 'p { margin-bottom: 10px; }';
        printableContent += '.section { border-top: 1px solid #ccc; padding-top: 20px; }';
        printableContent += '.title { color: #007bff; font-size: 24px; margin-bottom: 10px; }';
        printableContent += '.content { margin-left: 20px; }';
        printableContent += '</style>';

        printableContent += '<h1 class="title">Estimate Sheet Roofing</h1>';
        printableContent += '<h2 class="title">Owen\'s Construction</h2>';
        printableContent += '<div class="content">';
        printableContent += '<p>Insurance Specialists<br>';
        printableContent += 'Phone: (330) 507-5195<br>';
        printableContent += 'Fax: (330) 792-7432<br>';
        printableContent += 'Email: <a href="mailto:mykal372002@yahoo.com">mykal372002@yahoo.com</a><br>';
        printableContent += 'Website: <a href="https://www.owensroofs.com" target="_blank">www.owensroofs.com</a><br>';
        printableContent += 'Location: Austintown, Ohio<br>';
        printableContent += 'Fully Insured & Bonded<br>';
        printableContent += 'Professional Workmanship<br>';
        printableContent += '1 Year Labor Guarantee</p>';
        printableContent += '</div>';

        printableContent += '<div class="section">';
        printableContent += '<h2 class="title">Customer Information</h2>';
        printableContent += '<div class="content">';
        printableContent += '<p><strong>Customer Name:</strong> ' + formData.get('customerName') + '</p>';
        printableContent += '<p><strong>Customer Address:</strong> ' + formData.get('customerAddress') + '</p>';
        printableContent += '</div>';
        printableContent += '</div>';

        printableContent += '<div class="section">';
        printableContent += '<h2 class="title">Outside Work</h2>';
        printableContent += '<div class="content">';
        printableContent += '<p><strong>I will supply Labor and Material on a</strong> ' + formatRoofPitch(formData.get('roofPitch')) + ' pitch roof.</p>';
        printableContent += '<p><strong>We will use</strong> ' + formatShinglesType(formData.get('shinglesType')) + ' shingles.</p>';
        printableContent += '<p><strong>Shingle Color:</strong> ' + formData.get('shingleColor') + '</p>';
        printableContent += '<p><strong>Number of Squares:</strong> ' + formData.get('squares') + '</p>';
        printableContent += '<p><strong>Cost Per Square:</strong> $' + formatCostPerSquare(formData.get('costPerSquare')) + '</p>';
        printableContent += '<p><strong>Tear Off:</strong> ' + formatCheckbox(formData.get('tearOff')) + '</p>';
        printableContent += '<p><strong>New Drip Edge (Ln. Ft.):</strong> ' + formData.get('dripEdgeLength') + '</p>';
        printableContent += '<p><strong>Felt Weight:</strong> ' + formData.get('feltWeight') + ' lb on entire area of house.</p>';
        printableContent += '<p><strong>Ice and Water Guard:</strong> ' + formatCheckbox(formData.get('iceWaterGuard')) + '</p>';
        printableContent += '<p><strong>Re-flash</strong> ' + formData.get('chimneys') + ' chimneys.</p>';
        printableContent += '<p><strong>Weather in the Roof:</strong> ' + formatCheckbox(formData.get('weatherIn')) + '</p>';
        printableContent += '<p><strong>Replace up to</strong> ' + formData.get('plywoodSheets') + ' sheets of plywood related to your damage.</p>';
        printableContent += '<p><strong>Insulation Rating:</strong> Tear out any water damaged insulation and replace with R-' + formData.get('insulationRating') + '.</p>';
        printableContent += '<p><strong>Install new 6" inch boots for heating and stink pipes:</strong> ' + formData.get('bootsQuantity') + '</p>';
        printableContent += '<p><strong>Add new ridge vent on selective gables and apply ridge cap (Ln. Ft.):</strong> ' + formData.get('ridgeVentLength') + '</p>';
        printableContent += '<p><strong>Remove all box vents:</strong> ' + formData.get('boxVentsRemove') + '</p>';
        printableContent += '<p><strong>Add ice and water heavy duty to all valleys (Rolls):</strong> ' + formData.get('valleysRolls') + '</p>';
        printableContent += '<p><strong>Nails 1 1/4" (Boxes):</strong> ' + formData.get('nails1_25Boxes') + '</p>';
        printableContent += '<p><strong>Nails 1 3/4" (Boxes):</strong> ' + formData.get('nails1_75Boxes') + '</p>';
        printableContent += '<p><strong>Staples T-50's (Boxes):</strong> ' + formData.get('staplesBoxes') + '</p>';
        printableContent += '<p><strong>Plywood 7/16 OSB Sheets:</strong> ' + formData.get('plywoodSheetsOSB') + '</p>';
        printableContent += '<p>Using 1 - 15 yd dumpster to haul away debris.</p>';
        printableContent += '</div>';
        printableContent += '</div>';

        printableContent += '<div class="section">';
        printableContent += '<h2 class="title">Costs and Labor</h2>';
        printableContent += '<div class="content">';
        printableContent += '<p><strong>Total for Cost and Labor: $</strong>' + formData.get('totalCost') + '</p>';
        printableContent += '<p><strong>Miscellaneous:</strong> ' + formData.get('misc') + '</p>';
        printableContent += '</div>';
        printableContent += '</div>';

        printableContent += '<div class="section">';
        printableContent += '<h2 class="title">Terms and Conditions</h2>';
        printableContent += '<div class="content">';
        printableContent += 'All material is guaranteed to be as specified, and the above work to be performed in accordance with the drawings and specifications submitted for above work and completed in a substantial workmanlike manner for the sum of <input type="number" name="agreedSum">. Any alteration or deviation from above specifications involving extra costs will be executed only upon written orders, and will become an extra charge over and above the estimate. Owens Construction is not responsible for ice damage occurred on the roof. All agreements contingent upon strikes, accidents, or delays beyond our control. 50% money up front and 50% money on completion.';
        printableContent += 'Acceptance of Proposal: Owens Construction and <input type="text" name="clientName"> agree to the work with the money given from the insurance company, at no cost above or below the written amount including the depreciation. Any unforeseen expenses will be taken up with the insurance company and adjuster as a supplement.';
        printableContent += 'IN ACCORDANCE AND PURSUANT TO THE TERMS AND CONDITIONS OF OHIO REVISED CODE SECTION 1345.23 "HOME SOLICITATION ACT" THE HOMEOWNER SHALL HAVE THREE (3) BUSINESS DAYS TO CANCEL THE FOREGOING PROPOSAL/CONTRACT BY MIDNIGHT OF THE THIRD DAY.';
        printableContent += '</div>';
        printableContent += '</div>';

        printableContent += '<div class="section">';
        printableContent += '<h2 class="title">Signatures</h2>';
        printableContent += '<div class="content">';
        printableContent += '<p><strong>Signature:</strong> ' + formData.get('signature1') + ' <strong>Date:</strong> ' + formData.get('date1') + '</p>';
        printableContent += '<p><strong>Signature:</strong> ' + formData.get('signature2') + ' <strong>Date:</strong> ' + formData.get('date2') + '</p>';
        printableContent += '</div>';
        printableContent += '</div>';

        return printableContent;
    }

    function formatRoofPitch(pitch) {
        if (pitch === 'flat') {
            return 'Flat';
        } else {
            return pitch + ' pitch';
        }
    }

    function formatShinglesType(type) {
        if (type === 'pinicleAtlas') {
            return 'Pinicle Atlas';
        } else {
            return 'Other';
        }
    }

    function formatCostPerSquare(cost) {
        return parseFloat(cost).toFixed(2);
    }

    function formatCheckbox(value) {
        return value ? 'Yes' : 'No';
    }

    function printPage(content) {
        const printWindow = window.open('', '_blank');
        printWindow.document.open();
        printWindow.document.write('<html><head><title>Print</title>');
        printWindow.document.write('<link rel="stylesheet" href="style.css" type="text/css">');
        printWindow.document.write('</head><body>');
        printWindow.document.write(content);
        printWindow.document.write('</body></html>');
        printWindow.document.close();
        printWindow.focus();

        printWindow.onload = function() {
            html2canvas(printWindow.document.body).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 210;
                const pageHeight = 295;
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;

                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                pdf.save('estimate.pdf');
                printWindow.close();
            });
        };
    }
});
</script>


</body>
</html>
